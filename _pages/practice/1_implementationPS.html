
<!DOCTYPE html>


<html lang="ko" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lecture 1-2. 구현 실습 &#8212; 말레이시아 5급 학생들을 위한 파이썬 알고리즘 수업</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=9c59b310" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=ae323b5b"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../_static/translations.js?v=e33e7ba0"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_pages/practice/1_implementationPS';</script>
    <script src="https://unpkg.com/jupyterquiz@1.1.8/dist/jupyterquiz.min.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="색인" href="../../genindex.html" />
    <link rel="search" title="검색" href="../../search.html" />
    <link rel="next" title="Lecture 2-2. DFS/BFS 실습" href="2_DFS_BFSPS.html" />
    <link rel="prev" title="Lecture 7-1. Binary Search" href="../theory/7_binarysearch.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ko"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/mylogo.png" class="logo__image only-light" alt="말레이시아 5급 학생들을 위한 파이썬 알고리즘 수업 - Home"/>
    <script>document.write(`<img src="../../_static/mylogo.png" class="logo__image only-dark" alt="말레이시아 5급 학생들을 위한 파이썬 알고리즘 수업 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="검색" aria-label="검색" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">검색</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Welcome to 말레이시아 5급 IT 수업
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">기초</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../basics/oop.html">객체 지향 프로그래밍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/oop-classes_instances_objects.html">클래스, 인스턴스, 객체</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/regex.html">정규표현식</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">이론</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../theory/0_tips.html">문제 풀이 순서 팁 (Tips)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/1_implementation.html">Lecture 1-1. 구현</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/2_DFS_BFS.html">Lecture 2-1. DFS/BFS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/3_backtracking.html">Lecture 3-1. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/4_DP.html">Lecture 4-1. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/5_shortest_path.html">Lecture 5-1. Shortest Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/6_sort.html">Lecture 6-1. 정렬</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/7_binarysearch.html">Lecture 7-1. Binary Search</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">실습</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 1-2. 구현 실습</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_DFS_BFSPS.html">Lecture 2-2. DFS/BFS 실습</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_backtrackingPS.html">Lecture 3-2. Backtracking 실습</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_DPPS.html">Lecture 4-2. DP 실습</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_shortest_pathPS.html">Lecture 5-2. Shortest Path 실습</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">시험</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exams/midterm_student.html">Midterm</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="이 페이지 다운로드">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/_pages/practice/1_implementationPS.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="소스 파일 다운로드"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="PDF로 인쇄"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="전체 화면으로보기"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="검색" aria-label="검색" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 1-2. 구현 실습</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> 내용 </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bfs">1번: 마법의 숲 탐색 문제 풀이 BFS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-priorityqueue">3번: 미생물 연구 Sorting, PriorityQueue</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">4번: 민트초코 우유</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lecture-1-2">
<h1>Lecture 1-2. 구현 실습<a class="headerlink" href="#lecture-1-2" title="Link to this heading">#</a></h1>
<p>예시 문제 링크</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/magical-forest-exploration/description">1번: 코드트리 마법의 숲 탐색</a></p></li>
<li><p><a class="reference external" href="https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/codetrees-gambit/description">2번: 코드트리 코드트리 갬빗</a></p></li>
<li><p><a class="reference external" href="https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/microbial-research/description">3번: 코드트리 미생물 연구</a></p></li>
<li><p><a class="reference external" href="https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/mint-choco-milk/description">4번: 코드트리 민트초코 우유</a></p></li>
<li><p><a class="reference external" href="https://www.codetree.ai/ko/frequent-problems/samsung-sw/problems/medusa-and-warriors/description">5번: 코드트리 메두사와 전사들</a></p></li>
</ul>
<section id="bfs">
<h2>1번: 마법의 숲 탐색 문제 풀이 BFS<a class="headerlink" href="#bfs" title="Link to this heading">#</a></h2>
<div class="dropdown admonition">
<p class="admonition-title">문제 정리</p>
<ol class="arabic">
<li><p>격좌/좌표: RxC를 HXC로 변환 (O, R-1) -&gt; (0, H-1)까지</p></li>
<li><p>move_golem(): 아래로 최대한 내려갈 수 있는 (move as far south as possible) 함수 구현</p>
<ol class="arabic simple">
<li><p>Step 2-1: rolling downward -&gt; collision check 3 cells</p></li>
<li><p>Step 2-2: rotating left while moving downward -&gt; collision check 5 cells</p></li>
<li><p>Step 2-3: rotating right while moving downward -&gt; collision check 5 cells</p></li>
</ol>
</li>
<li><p>settle_or_reset():</p>
<ol class="arabic simple">
<li><p>정착 실패: 골렘이 멈췄을 때 십자 5칸 중 한 칸이라도 숲 밖(상단 패딩 포함 관점)이라면, 지금까지 놓인 모든 골렘을 전부 지우고 이번 시도는 0점 처리 후 다음 시도로 넘어간다.</p></li>
<li><p>정착 성공 시 배치: 정지 위치에 중심+팔 4칸을 기록하고, 출구 방향도 함께 저장한다(다음 단계 탐색에 필요).</p></li>
</ol>
</li>
<li><p>spirits 탐색 (explore)</p>
<ol class="arabic simple">
<li><p>골렘의 출구와 가까운 골렘을 통해 seed max값을 초기화 -&gt; 8가지 가능한 방향으로 같은 component의 값들에 큰 값 -&gt; 작은 값으로 value propagation(BFS사용)</p></li>
<li><p>관련하여 <a class="reference external" href="https://colab.research.google.com/github/Daye-Lee18/mybook/blob/main/assets/ipynb/propagation_demo.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a> 시드의 최대값 초기화가 중요한 이유 확인</p></li>
</ol>
</li>
<li><p>solve(): 위의 함수들을 사용하여, input을 받고 결과 출력하는 함수</p>
<ol class="arabic simple">
<li><p>격자/좌표:</p></li>
</ol>
<ul class="simple">
<li><p>숲은 R×C 격자. 문제 기준으로 가장 위가 1행, 가장 아래가 R행(좌표는 1-based). 정령(골렘)은 북쪽(격자 위쪽) 바깥에서 진입한다.</p>
<ul>
<li><p>(구현 팁) 진입·회전 동작을 편하게 처리하려고 상단에 3행을 더 붙인 격자(R+3×C) 로 두고 시뮬레이션하는 전형적인 방식이 많이 쓰인다.</p></li>
</ul>
</li>
<li><p>입력 &amp; 골렘 정의 (총 K번)</p>
<ul>
<li><p>한 번의 시도마다 열 c(1…C), 출구 방향 d(0:북, 1:동, 2:남, 3:서) 가 주어진다. 골렘은 십자(+) 모양(중심+상하좌우) 으로 5칸을 차지하며, 출구는 중심에서 d 방향으로 인접한 1칸이다.</p></li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
<div class="dropdown admonition">
<p class="admonition-title">graph의 확장</p>
<p><img alt="3-1" src="../../_images/11.png" /></p>
<p>In the beginning, the golem may extend up to <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">cells</span></code> above the forest. To handle this, we add 3 buffer rows at the top of the grid. These buffer rows are not part of the forest but provide enough room for the golem to move and settle safely.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">max value of each id</p>
<p>graph를 확장했으므로 (H= R + 3), best는 현재 골렘의 center_y, center_x보다 한 칸 아래인 것 ((cy +1, cx)이 맞으나,
확장된 그래프 전의 index를 사용해야하므로 (cy + 1 -3, cx)이다. 하지만, 1열을 0이 아닌 1로 표시하므로 (cy + 1 -3 +1, cx)로 결국 (cy -1, cx)가 된다.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">각 step 구현</p>
<p>When the golem moves one step down, we must check 3 positions below the center: directly underneath, and one cell to the left and right. If all 3 are empty, the golem can move downward without collision.
<img alt="3-2" src="../../_images/21.png" /></p>
<p>Now let’s look at rotation to the left. For the golem to rotate, <code class="docutils literal notranslate"><span class="pre">five</span> <span class="pre">specific</span> <span class="pre">cells</span></code> must be empty. Interestingly, the rules allow rotation even if the upper-right or lower-right cells are occupied. We number the directions North, East, South, and West as 0, 1, 2, and 3. Using this, left rotation is simply (d + 3) mod 4, and right rotation is (d + 1) mod 4.</p>
<p><img alt="3-3" src="../../_images/31.png" /></p>
<p>Rotation to the right works symmetrically. Again, five surrounding cells must be empty to allow the move. The concept is the same as left rotation, but we apply the clockwise formula.
<img alt="3-4" src="../../_images/41.png" /></p>
<p>When the golem finally stops, all four arms must be inside the forest area, which is from row 3 down to H–1. To manage state, we store each golem’s position and exit direction in units[gid]. We also record which exit belongs to which golem in exit_map. This way, exit_map tells us the gid, and units gives us the exact center and direction.
<img alt="3-5" src="../../_images/51.png" /></p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">정보 저장</p>
<p>We maintain two separate grids: <code class="docutils literal notranslate"><span class="pre">golem_arr</span></code> and <code class="docutils literal notranslate"><span class="pre">exit_map</span></code>. The <code class="docutils literal notranslate"><span class="pre">golem</span> <span class="pre">array</span></code> records body occupancy and is used for <code class="docutils literal notranslate"><span class="pre">collision</span> <span class="pre">checks</span></code>. The <code class="docutils literal notranslate"><span class="pre">exit</span> <span class="pre">map</span></code> records <code class="docutils literal notranslate"><span class="pre">only</span> <span class="pre">exits</span></code>, which lets us trace connectivity between golems using <code class="docutils literal notranslate"><span class="pre">BFS</span></code>. This separation is crucial because body cells and exit cells need to be treated differently.</p>
<p><img alt="3-6" src="../../_images/6.png" /></p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">최댓값 전파 BFS</p>
<p>현재 골렘의 최댓값을 전파하려면, “다른 골렘의 ‘출구‘“와 맞닿아있어야함. 따라서, 현재 골렘 8방에 다른 골렘의 출구가 있는지 출구 일때에만 전파를 해주는 것을 명심!</p>
<p><img alt="3-7" src="../../_images/7.png" /></p>
<p>Finally, let’s look at how we propagate the maximum reachable row.</p>
<ul class="simple">
<li><p>Step one: if <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">current</span> <span class="pre">golem’s</span> <span class="pre">exit</span></code> touches a neighbor’s body, we inherit its <code class="docutils literal notranslate"><span class="pre">max_row</span></code> as the <code class="docutils literal notranslate"><span class="pre">seed</span></code> value.</p></li>
<li><p>Step two: using BFS, we spread values along exit-to-exit connections across the whole component.</p></li>
</ul>
<p>This two-step design ensures accuracy — newly placed golems immediately get the correct value. It also improves efficiency, since we avoid repeated updates by maximizing early and propagating just once.</p>
<p><img alt="3-8" src="../../_images/8.png" /></p>
<ol class="arabic simple">
<li><p>best 계산 단계 (시드 확정)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start_id</span></code> 의 출구 주변을 보면서, 이미 숲에 있던 이웃 골렘들이 가지고 있던 <code class="docutils literal notranslate"><span class="pre">max_row</span></code>값 참고</p></li>
<li><p>방금 들어온 골렘이 가질 수 있는 가장 큰 시작값 (best)를 정함.</p></li>
</ol>
</li>
<li><p>전파 단계 (BFS)</p>
<ol class="arabic simple">
<li><p>이제 <code class="docutils literal notranslate"><span class="pre">start_id</span></code>가 속한 component전체에 대해, max_row가 작은 이웃 노드들을 best 값으로 끌어올림.</p></li>
<li><p>이 과정을 통해 같은 컴포넌트 안의 모든 골렘이 최대값을 공유</p></li>
<li><p>이렇게 해 두면, 나중에 컴포넌트 안에서 어느 골렘을 시작점으로 잡아도 같은 답을 얻을 수 있습니다.</p></li>
<li><p>다음 골렘을 위해 준비 완료</p></li>
</ol>
</li>
</ol>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span> 

<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;Input.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span> 

<span class="n">R</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">K</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">H</span> <span class="o">=</span> <span class="n">R</span> <span class="o">+</span> <span class="mi">3</span> 
<span class="n">graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">C</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">H</span><span class="p">)]</span>
<span class="n">id_to_center_dir</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">숲의 바깥방향에서 시작해 골렘의 중아이 c열이 되도록 하는 위치에서 내려옴. </span>
<span class="sd">1) 남쪽 2) 서쪽 rotation + 아래 한 칸 3) 동쪽 rotation + 아래 한칸 </span>
<span class="sd">---&gt; 가장 남쪽 도달 후에는 정령은 골렘 내에서 상하좌우 인접칸으로 이동 가능 </span>
<span class="sd">---&gt; 최종에서 골렘의 몸 일부가 여전히 숲을 벗어난 상태라면 모든 골렘 삭제 및 새롭게 숲  탐색 -&gt; 이 경우 최종 위치를 답에 포함시키지 않음. </span>
<span class="sd">---&gt; 골렘의 출구가 다른 골렘과 인접하다면 해당 출구를 통해 다른 골렘으로 이동 가능 </span>
<span class="sd">----&gt; 정령이 도달하게 되는 최종 위치 누적 </span>
<span class="sd">정령은 어떤 방향에서든 골렘에 탑승 가능, 내릴 때에는 정해진 출구를 통해서만 내릴 수 있음. </span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="c1"># 북, 동, 남 ,서 </span>
<span class="n">AY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">AX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">LY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span> <span class="n">LX</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">RY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span> <span class="n">RX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">max_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">K</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span> <span class="o">&lt;</span><span class="n">H</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">C</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">in_forest</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">H</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">C</span>

<span class="k">def</span><span class="w"> </span><span class="nf">can_move</span><span class="p">(</span><span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span><span class="p">,</span> <span class="n">DIR_Y</span><span class="p">,</span> <span class="n">DIR_X</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">dt_y</span><span class="p">,</span> <span class="n">dt_x</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">DIR_Y</span><span class="p">,</span> <span class="n">DIR_X</span><span class="p">):</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">cur_y</span> <span class="o">+</span> <span class="n">dt_y</span> 
        <span class="n">nx</span> <span class="o">=</span> <span class="n">cur_x</span> <span class="o">+</span> <span class="n">dt_x</span> 
        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">or</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    
    <span class="k">return</span> <span class="kc">True</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="n">center_y</span><span class="p">,</span> <span class="n">center_x</span><span class="p">,</span> <span class="nb">dir</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">center_y</span><span class="p">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">center_x</span>
    
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">can_move</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">DY</span><span class="p">,</span> <span class="n">DX</span><span class="p">):</span> <span class="c1"># 아래 </span>
            <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span> 
            <span class="k">continue</span> 

        <span class="k">if</span> <span class="n">can_move</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">LY</span><span class="p">,</span> <span class="n">LX</span><span class="p">):</span> <span class="c1"># 왼쪽 아래 </span>
            <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span> 
            <span class="nb">dir</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dir</span> <span class="o">+</span><span class="mi">3</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span>
            <span class="k">continue</span> 
         
        <span class="k">if</span> <span class="n">can_move</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">RY</span><span class="p">,</span> <span class="n">RX</span><span class="p">):</span> <span class="c1"># 오른쪽 아래 </span>
            <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span> 
            <span class="nb">dir</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dir</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span>
            <span class="k">continue</span> 

        <span class="c1"># 위의 3가지 경우로 못가는 경우 멈춤 </span>
        <span class="k">break</span> 

    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nb">dir</span>



<span class="k">def</span><span class="w"> </span><span class="nf">reset_or_settle</span><span class="p">(</span><span class="n">cy</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">spirit_id</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">id_to_center_dir</span>
    <span class="c1"># reset </span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">AY</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">AX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_forest</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">):</span>
            <span class="c1"># reset :graph and id_to_center_dir</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">H</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">C</span><span class="p">):</span>
                    <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> 

            <span class="n">id_to_center_dir</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span> 
    <span class="c1"># settle </span>
    <span class="n">graph</span><span class="p">[</span><span class="n">cy</span><span class="p">][</span><span class="n">cx</span><span class="p">]</span> <span class="o">=</span> <span class="n">spirit_id</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">ay</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">AY</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">AX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="n">graph</span><span class="p">[</span><span class="n">ay</span><span class="p">][</span><span class="n">ax</span><span class="p">]</span> <span class="o">=</span> <span class="n">spirit_id</span>

    <span class="c1"># id_to_center_dict update </span>
    <span class="n">id_to_center_dir</span><span class="p">[</span><span class="n">spirit_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cy</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span> 
    
<span class="k">def</span><span class="w"> </span><span class="nf">exit_cell</span><span class="p">(</span><span class="n">id_</span><span class="p">):</span>
    <span class="n">cy</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cd</span> <span class="o">=</span> <span class="n">id_to_center_dir</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">AY</span><span class="p">[</span><span class="n">cd</span><span class="p">],</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">AX</span><span class="p">[</span><span class="n">cd</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
    <span class="c1"># 현재 위치 Max값 구하기 </span>
    <span class="n">cy</span> <span class="o">=</span> <span class="n">id_to_center_dir</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cx</span> <span class="o">=</span> <span class="n">id_to_center_dir</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">c_dir</span> <span class="o">=</span> <span class="n">id_to_center_dir</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1"># exit </span>
    <span class="n">ey</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">AY</span><span class="p">[</span><span class="n">c_dir</span><span class="p">]</span> 
    <span class="n">ex</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">AX</span><span class="p">[</span><span class="n">c_dir</span><span class="p">]</span>
    
    <span class="n">best</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">2</span> <span class="c1"># 현재 위치에서 골렘 아래 팔로 내려가는 것 - 2(원래 map에서의 column값)이 가장 큰 값 </span>
    <span class="c1"># 현재 골렘의 출구와 연결되어 있는 골렘들의 max값으로 update </span>
    <span class="c1"># 이미 다른 골렘들은 연결되어 있는 골렘들이 가진 max값으로 update되어 있기 때문에 출구에서 4 방향을 보는 것만으로 충분함. </span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="n">ey</span> <span class="o">+</span> <span class="n">AY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="n">ex</span> <span class="o">+</span> <span class="n">AX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">in_forest</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">:</span>
            <span class="n">best</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">best</span><span class="p">,</span> <span class="n">max_values</span><span class="p">[</span><span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]])</span>

    <span class="c1"># 현재 H 행이므로 H = R + 3 인데, 첫 행을 1부터 시작하므로 -3 + 1 해서 -2 </span>
    <span class="n">max_values</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">best</span>

    <span class="c1"># propagate </span>
    <span class="c1"># 현재 골렘 옆에 있는 골렘 값들도 max 값으로 update해주기</span>
    <span class="c1"># 8방향에서 내 쪽으로 들어올 수 있기 때문에, &quot;옆에 출구가 있는 것들에 한해&quot; 업데이트 해주기?! </span>
    <span class="c1"># 연결되어 있지 않은 골렘들이 현재 id에 내려온 골렘때문에 연결될 수 있으므로 propagation </span>
    <span class="n">Neighbor_Y</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="n">Neighbor_X</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="c1"># BFS </span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">cy</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="nb">id</span><span class="p">)])</span> <span class="c1"># center y, x값을 넣어야함. </span>
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
        <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">cur_id</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Neighbor_Y</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">Neighbor_X</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> 
            <span class="k">if</span> <span class="n">in_forest</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">!=</span> <span class="n">cur_id</span><span class="p">:</span>
                <span class="c1"># 현재 위치가 다른 골렘의 출구인 경우만, propgate </span>
                <span class="k">if</span> <span class="n">exit_cell</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">):</span>
                    <span class="n">n_id</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">n_id</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">n_id</span><span class="p">)</span>
                        <span class="c1"># update </span>
                        <span class="n">max_values</span><span class="p">[</span><span class="n">n_id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_values</span><span class="p">[</span><span class="n">n_id</span><span class="p">],</span> <span class="n">best</span><span class="p">)</span>
                        <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">id_to_center_dir</span><span class="p">[</span><span class="n">n_id</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">id_to_center_dir</span><span class="p">[</span><span class="n">n_id</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">n_id</span><span class="p">))</span> <span class="c1"># center 값 update </span>

<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">spirit_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">K</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        
        <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="c1"># print(f&quot;from {c-1} column&quot;)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span><span class="mi">1</span> 
        <span class="c1"># place, # 현재 골렘안의 정령이 최대로 갈 수 있는 위치 구하기 </span>
        <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span><span class="p">,</span> <span class="n">cur_dir</span> <span class="o">=</span> <span class="n">place</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

        <span class="c1"># forest밖이면 reset, 아니면 graph및 id_to_center_dirs에 표시 </span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">reset_or_settle</span><span class="p">(</span><span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span><span class="p">,</span> <span class="n">cur_dir</span><span class="p">,</span> <span class="n">spirit_id</span><span class="p">):</span>
            <span class="c1"># print(f&quot;max y of {spirit_id}: ignore&quot;)</span>
            <span class="c1"># for row in graph:</span>
            <span class="c1">#     print(row[:])</span>
            <span class="k">continue</span> 

        <span class="n">calculate</span><span class="p">(</span><span class="n">spirit_id</span><span class="p">)</span>
        <span class="c1"># print(f&quot;max y of {spirit_id}: {max_values[spirit_id]}&quot;)</span>
        <span class="c1"># for row in graph:</span>
        <span class="c1">#     print(row[:])</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">max_values</span><span class="p">[</span><span class="n">spirit_id</span><span class="p">]</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="sorting-priorityqueue">
<h2>3번: 미생물 연구 Sorting, PriorityQueue<a class="headerlink" href="#sorting-priorityqueue" title="Link to this heading">#</a></h2>
<div class="dropdown admonition">
<p class="admonition-title">문제 정리</p>
<ol class="arabic simple">
<li><p>NxN 정사각형 배양 용기, 좌측 하단 (0,0), 우측 상단 (N, N)</p></li>
<li><p>총 Q번 실험동안, 실험 결과 기록</p>
<ul class="simple">
<li><p>2-1. insert_and_get_result() 미생물 투입 후, 배양</p>
<ul>
<li><p>(r1, c1) ~ (r2, c2) 직사각형 미생물 투입, 영역내에는 새로 투입된 미생물만 남음.</p></li>
<li><p>기존에 있던 미생물이 먹힌 경우, 영역이 두 개 이상으로 나뉘면 기존 미생물은 모두 사라짐.  -&gt; 항상 미생물은 하나의 그룹으로만 이루어지게 만듦.</p></li>
</ul>
</li>
<li><p>2-2. 배양 용기 이동: move_microbe()</p>
<ul>
<li><p>기존 용기와 동일한 새로운 배양 용기로 이동. 기존 배양 용기에 미생물이 한 마디도 남지 않을 때까지</p>
<ul>
<li><p>가장 차지한 영역 ((r1, c1) ~ (r2, c2))이 넓은 무리 하나 선택 -&gt; 2개 이상이면 먼저 투입된 미생물 선택 (용기에는 미생물을 넣은 시간 정보 필요 -&gt; idx가 작은 것 선택)</p></li>
<li><p>선택된 미생물의 영역 ((r1, c1) ~ (r2, c2))은</p>
<ul>
<li><p>배양 용기의 범위를 벗어나지 않으며</p></li>
<li><p>다른 미생물의 영역과 겹치지 않아야하고,</p></li>
<li><p>위의 조건에서 최대한 x좌표가 작은 위치로 미생물을 옮기는데,</p>
<ul>
<li><p>그 위치가 2개 이상이면 최대한 y좌표가 작은 위치로 오도록 옮김</p></li>
</ul>
</li>
<li><p>위의 조건이 없다면, 옮기지 못하고 사라짐</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>2-3. record()</p>
<ul>
<li><p>미생물 무리 중 상하좌우로 닿아있는 인접한 무리 확인</p></li>
<li><p>맞닿은 면이 둘 이상이더라도 micro_id같으면 한 번만 확인</p></li>
<li><p>인접한 무리가 있으면</p>
<ul>
<li><p>확인하는 두 무리가 A,B라면 (미생물 A영역의 넓이) x (미생물 B영역의 넓이) 성과</p></li>
<li><p>확인한 모든 쌍의 성과 기록</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
<div class="dropdown admonition">
<p class="admonition-title">debugging시 CCW 90도 rotation 적용</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">print_rotated_CCW_90</span><span class="p">(</span><span class="n">my_map</span><span class="p">):</span>
    <span class="c1"># new_map = [[0] * N for _ in range(N)]</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="c1"># new_map[y][x] = my_map[N-x-1][y]</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">my_map</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">N</span><span class="o">-</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>

<span class="n">print_rotated_CCW_90</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">원점위치에 따른 좌표 변환</p>
<p>좌상단이 시작점인지, 좌하단이 시작점인지 좌표 변환 <a class="reference external" href="https://colab.research.google.com/github/Daye-Lee18/mybook/blob/main/assets/ipynb/grid_coords_rotations_cheatsheet.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<p><img alt="" src="../../_images/12.png" /></p>
<p>요약하자면,</p>
<ul class="simple">
<li><p><strong>좌하단→좌상단(배열)</strong>: <code class="docutils literal notranslate"><span class="pre">row</span> <span class="pre">=</span> <span class="pre">N</span> <span class="pre">-</span> <span class="pre">1</span> <span class="pre">-</span> <span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">col</span> <span class="pre">=</span> <span class="pre">x</span></code></p></li>
<li><p><strong>회전</strong>: <strong>Transpose</strong> + (CW=<strong>flip left–right</strong>, CCW=<strong>flip up–down</strong>)</p></li>
<li><p><strong>뒤집기</strong>: 상하=<strong>row만 뒤집기</strong>, 좌우=<strong>col만 뒤집기</strong></p></li>
</ul>
</div>
<div class="dropdown admonition">
<p class="admonition-title">sort</p>
<p>주의해야할 것은, <code class="docutils literal notranslate"><span class="pre">lowest</span></code>와 <code class="docutils literal notranslate"><span class="pre">rear</span></code>을 비교하는 것!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sort id_to_locs_list in descending order of the area and id </span>
<span class="n">list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">list_len</span><span class="p">):</span>
    <span class="n">lowest</span> <span class="o">=</span> <span class="n">f</span> 
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">list_len</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">compare</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">lowest</span> <span class="o">=</span> <span class="n">r</span> 
            
    
    <span class="c1"># SWAP </span>
    <span class="k">if</span> <span class="n">lowest</span> <span class="o">!=</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
        <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span>
        <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span> 
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">3중 for loop안에서 닫는 위치</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">)):</span>          <span class="c1"># [루프 1]</span>
    <span class="k">for</span> <span class="n">origin_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>              <span class="c1"># [루프 2]</span>
        <span class="k">for</span> <span class="n">origin_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>          <span class="c1"># [루프 3]</span>
            <span class="o">...</span>
            <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                <span class="o">...</span>
                <span class="k">break</span>   <span class="c1"># &lt;-- 여기서 끊기는 건 루프 3만</span>
        <span class="k">if</span> <span class="n">flag</span><span class="p">:</span> <span class="c1"># [루프 2] 중단</span>
            <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">set.union</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">set1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span> <span class="c1"># X </span>
<span class="n">set1</span> <span class="o">=</span> <span class="n">set1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span> <span class="c1"># O</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">내 문제 풀이</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">yx_from_rc</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">put_new_microbe</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">micro_id</span><span class="p">):</span>

    <span class="c1"># # 바뀐 것에 대해서 작은 것 ~ 큰 것으로 분류 </span>
    <span class="c1"># (y, x)는 포함 (t, v)는 불포함 </span>
    <span class="c1"># small_y = y if y &lt; t else t </span>
    <span class="c1"># big_y = y if y &gt; t else t </span>
    <span class="c1"># small_x = x if x &lt; v else v </span>
    <span class="c1"># big_x = x if x &gt; v else v </span>


    <span class="c1"># print(f&#39;Cur graph after put at {y, x} ~ {t, v}&#39;)</span>
    <span class="c1"># inclusive ~ exclusive </span>
    <span class="n">eatened_microbe_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">eatened_microbe_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">])</span>
            <span class="c1"># 다른 미생물들은 잡아먹음 </span>
            <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">micro_id</span>

    <span class="c1"># 기존 무리의 영역이 2개 이상이되면, 나눠진 미생물은 모두 사라짐. </span>
    <span class="c1"># 잡아먹힌 micro_ids에 대해서 확인 </span>
    <span class="k">for</span> <span class="n">removed_id</span> <span class="ow">in</span> <span class="n">eatened_microbe_ids</span><span class="p">:</span>
        <span class="n">nums</span><span class="p">,</span> <span class="n">locs</span> <span class="o">=</span> <span class="n">count_group_of_id</span><span class="p">(</span><span class="n">removed_id</span><span class="p">)</span> <span class="c1"># int, list </span>
        <span class="c1"># 해당 미생물을 없앰 </span>
        <span class="k">if</span> <span class="n">nums</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rx</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
                <span class="n">graph</span><span class="p">[</span><span class="n">ry</span><span class="p">][</span><span class="n">rx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span> <span class="o">&lt;</span><span class="n">N</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span> <span class="o">&lt;</span><span class="n">N</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_closer_to_lower_left</span><span class="p">(</span><span class="n">tuple1</span><span class="p">,</span> <span class="n">tuple2</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tuple1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">tuple2</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">tuple1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">tuple2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># y가 더 큰 것 </span>
    <span class="k">return</span> <span class="n">tuple1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">tuple2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># x는 더 작은 것 </span>

<span class="k">def</span><span class="w"> </span><span class="nf">sort_locs_closer_to_lower_left</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">):</span>
    <span class="n">tuple_list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tuple_list_len</span><span class="p">):</span>
        <span class="n">lowest</span> <span class="o">=</span> <span class="n">f</span> 
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">tuple_list_len</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_closer_to_lower_left</span><span class="p">(</span><span class="n">tuple_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">],</span> <span class="n">tuple_list</span><span class="p">[</span><span class="n">r</span><span class="p">]):</span>
                <span class="n">lowest</span> <span class="o">=</span> <span class="n">r</span> 
        
        <span class="k">if</span> <span class="n">lowest</span> <span class="o">!=</span> <span class="n">f</span><span class="p">:</span>
            <span class="c1"># SWAP </span>
            <span class="n">temp_tuple</span> <span class="o">=</span> <span class="n">tuple_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span>
            <span class="n">tuple_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span> <span class="o">=</span> <span class="n">tuple_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
            <span class="n">tuple_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_tuple</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_ids_and_shapes</span><span class="p">():</span>
    
    <span class="n">id_to_locs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    
    <span class="c1"># 현재 최대 cur_micro_id만큼의 개수가 존재할 수 있음 (지워진 것 빼고)</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">id_to_locs</span><span class="p">:</span>
                <span class="n">locs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># NOTE: locations 추적, 새로운 ID 발견할 때마다 새롭게 INIT 필요 </span>
                <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)])</span>
                <span class="n">locs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
                <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
                    <span class="n">cury</span><span class="p">,</span> <span class="n">curx</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                        <span class="n">ny</span> <span class="o">=</span> <span class="n">cury</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="p">;</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">curx</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
                        <span class="c1"># 현재 micro_idx와도 동일해야함 </span>
                        <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">locs</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                            <span class="n">locs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                
                <span class="c1"># micro_id마다 위치를 연결하는 dictionary 생성 </span>
                <span class="n">id_to_locs</span><span class="p">[</span><span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">locs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">id_to_locs</span>

<span class="k">def</span><span class="w"> </span><span class="nf">move_microbe</span><span class="p">(</span><span class="n">new_graph</span><span class="p">):</span>
    <span class="c1"># 현재 global graph에 있는 미생물들을 보고 new_graph에 옮겨 담기 </span>
    <span class="c1"># Step 1: 1개의 그룹씩 있는 각 미생물들의 위치 locs구하기, len(locs)이 가장 높은 것이 가장 먼저 옮겨짐 </span>
    <span class="c1"># 모양은 원점에서 가장 왼쪽 아래 (바꾼 그래프 상으로는 왼쪽 위)와 가장 가까운 점까지의 거리만큼 모두 이동하면 됨.</span>
    <span class="n">id_to_locs</span> <span class="o">=</span> <span class="n">get_ids_and_shapes</span><span class="p">()</span>

    <span class="c1"># print(f&#39;Current id with locs \n{id_to_locs}&#39;)</span>
    <span class="c1"># print(&#39;Len: &#39;, len(id_to_locs))</span>

    <span class="c1"># id_to_locs을 정렬 </span>
    <span class="c1"># 1. 개수가 가장 많은 것</span>
    <span class="c1"># 2. 개수가 동일하다면 가장 먼저 투입된 미생물 선택 </span>
    <span class="n">id_to_locs_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">id_to_locs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">id_to_locs_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

    <span class="n">sort_list</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">)</span> <span class="c1"># call by reference </span>
    <span class="c1"># print(f&quot;Sorted as described in the problem \n {id_to_locs_list}&quot;)</span>
    
    <span class="c1"># locs은 origin (7, 0) 과 가장 가까운 순서대로 정렬 즉, ascending order </span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">locs</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">):</span>
        <span class="c1"># set 재할당 </span>
        <span class="n">sort_locs_closer_to_lower_left</span><span class="p">(</span><span class="n">locs</span><span class="p">)</span>
        <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">locs</span><span class="p">)</span>

    <span class="c1"># print(f&quot;Sorted id_to_locs closer to the origin \n {id_to_locs_list}&quot;)</span>

    <span class="n">each_nums</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 옮겨서 살아남은 미생물들의 개수만 append </span>

    <span class="c1"># 옮기기 </span>
    <span class="c1"># 모든 미생물에 대해 </span>
    <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">locs</span> <span class="ow">in</span> <span class="n">id_to_locs_list</span><span class="p">:</span>
        
        <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span> 
        <span class="c1"># 이 조건안에서 colum 좌표가 작은 위치로 옮기고, 그 위치가 둘 이상이면 최대한 row 좌표가 작은 위치로 오도록 옮김 (x좌표가 작은 위치 -&gt; y가 작은 위치)</span>
        <span class="c1"># 시작 위치 찾기: b를 outer loop에 둬서 x가 작은 위치를 먼저 확인  </span>
        <span class="c1"># for ori_y in range(N-1, -1, -1):</span>
        <span class="c1">#     for ori_x in range(N):</span>
        <span class="k">for</span> <span class="n">ori_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ori_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="c1">#### NOTE: 매 origina마다 update하지 않으면, 이전에 실패한대로 계속 False로 머무르게됨.</span>
                <span class="n">is_the_origin_ok</span> <span class="o">=</span> <span class="kc">True</span> 
                <span class="k">if</span> <span class="n">new_graph</span><span class="p">[</span><span class="n">ori_y</span><span class="p">][</span><span class="n">ori_x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># 옮길 그래프에서 시작점 for loop들어가기 전에 미리 체크해서 시간 줄이기 </span>
                    <span class="k">continue</span>

                <span class="c1"># 미생물 무리가 차지한 영역이 배양 용기를 벗어나지 않아야함 </span>
                <span class="c1"># 현재 locs의 모든 점이 (a,b)만큼 평행 이동했을 때 벗어나면 안됨 </span>
                <span class="c1"># NOTE: dif_y, dif_x는 제일 작은 지점과의 거리임!! 고정!!!! </span>
                <span class="n">dif_y</span> <span class="o">=</span> <span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ori_y</span>
                <span class="n">dif_x</span> <span class="o">=</span> <span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ori_x</span>
                
                <span class="k">for</span> <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
                    <span class="c1"># NOTE: dif_y, dif_x는 제일 작은 지점과의 거리임!! </span>
                    <span class="n">n_y</span> <span class="o">=</span> <span class="n">cur_y</span><span class="o">-</span><span class="n">dif_y</span>
                    <span class="n">n_x</span> <span class="o">=</span> <span class="n">cur_x</span><span class="o">-</span><span class="n">dif_x</span>
                    <span class="c1"># print(f&quot;Move point {cur_y, cur_x} -&gt; {n_y, n_x}&quot;)</span>
                    <span class="c1"># 평행 이동한 점들이 배양용기를 벗어나거나 다른 microbe가 있으면 </span>
                    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">in_range</span><span class="p">(</span><span class="n">n_y</span><span class="p">,</span><span class="n">n_x</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">new_graph</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">!=</span><span class="mi">0</span><span class="p">):</span>
                        <span class="n">is_the_origin_ok</span> <span class="o">=</span> <span class="kc">False</span> 
                        <span class="k">break</span> 
                
                
                <span class="c1"># 다른 미생물이 이미 있으면 이곳을 시작점으로 할 수 없음 </span>
                <span class="k">if</span> <span class="n">is_the_origin_ok</span> <span class="ow">and</span> <span class="n">new_graph</span><span class="p">[</span><span class="n">ori_y</span><span class="p">][</span><span class="n">ori_x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># 괜찮으면 new_graph에 옮김 </span>
                    <span class="n">dif_y</span> <span class="o">=</span> <span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ori_y</span>
                    <span class="n">dif_x</span> <span class="o">=</span> <span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ori_x</span>
                    <span class="k">for</span> <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
                        <span class="n">n_y</span> <span class="o">=</span> <span class="n">cur_y</span><span class="o">-</span><span class="n">dif_y</span>
                        <span class="n">n_x</span> <span class="o">=</span> <span class="n">cur_x</span><span class="o">-</span><span class="n">dif_x</span>
                        <span class="n">new_graph</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
                    
                    <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span> 
                    <span class="c1"># each_nums update </span>
                    <span class="n">each_nums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">locs</span><span class="p">))</span>
                    <span class="c1"># 한번 옮겼으면 2중 for loop을 멈춰야함. </span>

                <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
                    <span class="k">break</span>  <span class="c1"># stack구조에서 가장 안쪽 for loop </span>
            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
                <span class="k">break</span> <span class="c1"># stack구조에서 가장 바깥쪽 for loop  </span>
                <span class="c1"># 그게 아니라면 어떤 곳에도 둘 수 없다면 사라짐  (update를 안하면 됨.)</span>
    <span class="c1"># 살아남은 것들만 개수 return </span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">each_nums</span><span class="p">)</span>



<span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">locs1</span><span class="p">,</span> <span class="n">locs2</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs2</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs2</span><span class="p">)</span> <span class="c1"># 개수가 더 많은 것이 좋음</span>
    <span class="k">if</span> <span class="n">id1</span> <span class="o">!=</span> <span class="n">id2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">id1</span> <span class="o">&lt;</span> <span class="n">id2</span>  <span class="c1"># 먼저 들어온 것일수록 좋음 </span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">sort_list</span><span class="p">(</span><span class="n">my_list</span><span class="p">):</span>
    <span class="n">list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">front</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">list_len</span><span class="p">):</span>
        <span class="n">lowest</span> <span class="o">=</span> <span class="n">front</span> 
        <span class="k">for</span> <span class="n">rear</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">front</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">list_len</span><span class="p">):</span>
            <span class="c1"># compare(locs1, locs2, id1, id2)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">compare</span><span class="p">(</span><span class="n">my_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">my_list</span><span class="p">[</span><span class="n">rear</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">my_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">my_list</span><span class="p">[</span><span class="n">rear</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">lowest</span> <span class="o">=</span> <span class="n">rear</span> 
        
        <span class="c1"># 위치 변경이 있는 경우 SWAP </span>
        <span class="k">if</span> <span class="n">lowest</span> <span class="o">!=</span> <span class="n">front</span><span class="p">:</span> 
            <span class="n">temp_tuple</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="n">front</span><span class="p">]</span>
            <span class="n">my_list</span><span class="p">[</span><span class="n">front</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span> <span class="c1"># tuple의 재할당은 가능 , 다만 tuple은 t[0] = 99로 &#39;item&#39; assignment는 하지못함. </span>
            <span class="n">my_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span><span class="o">=</span> <span class="n">temp_tuple</span>

<span class="k">def</span><span class="w"> </span><span class="nf">count_group_of_id</span><span class="p">(</span><span class="n">m_id</span><span class="p">):</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>


    <span class="c1"># 맵 전체 돌면서 확인 </span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">m_id</span> <span class="ow">and</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="c1"># visited propgation </span>
                <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)])</span>
                <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
                <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
                    <span class="n">cury</span><span class="p">,</span> <span class="n">curx</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                        <span class="n">ny</span> <span class="o">=</span> <span class="n">cury</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="p">;</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">curx</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">m_id</span><span class="p">:</span>
                            <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>

                <span class="c1">#### BFS가 끝나면 group 1개 </span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span> 
    <span class="k">return</span> <span class="n">cnt</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">visited</span><span class="p">)</span>





<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">N</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span><span class="n">DY</span><span class="p">,</span> <span class="n">DX</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="c1"># f = open(&#39;/Users/dayelee/Documents/GitHub/mybook/Input.txt&#39;, &#39;r&#39;)</span>
    <span class="n">N</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

    <span class="k">for</span> <span class="n">micro_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Q</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">c1</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

        <span class="c1"># prelim </span>
        <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">yx_from_rc</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">r1</span><span class="p">)</span>
        <span class="n">t</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">yx_from_rc</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>

        <span class="c1"># Step 1: </span>
        <span class="c1"># 직사각형 영역에 미생물 투입 [(y, x) ~ (t, v)) inclusive ~ exclusive</span>
        <span class="c1"># 다른 미생물들은 잡아먹음 </span>
        <span class="c1"># 기존 무리의 영역이 2개 이상이되면, 나눠진 미생물은 모두 사라짐. </span>
        <span class="n">put_new_microbe</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">micro_id</span><span class="p">)</span>

        <span class="c1"># print(&quot;Graph after putting new microbe&quot;)</span>
        <span class="c1"># for row in graph:</span>
        <span class="c1">#     print(row)</span>

        <span class="c1"># Step 2: 배양 용기 이동 </span>
        <span class="c1"># 가장 column 좌표가 작으면서 row 좌표가 작은 위치(x가 작고 그 다음에 y가 작은 위치로 이동)</span>
        <span class="n">moved_graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="n">move_microbe</span><span class="p">(</span><span class="n">moved_graph</span><span class="p">)</span> <span class="c1"># call by reference </span>
        <span class="c1"># print(f&quot;each nums: {each_nums}&quot;)</span>

        <span class="c1"># print(&quot;Graph after Moving microbe&quot;)</span>
        <span class="c1"># for row in moved_graph:</span>
        <span class="c1">#     print(row)</span>
        <span class="c1"># Step 3: 실험 결과 기록 </span>
        <span class="c1"># 그룹이 2개 이상일 때 개수들을 다 곱함 </span>

        <span class="c1"># NOTE: graph는 이전 moved_graph로 update </span>
        <span class="n">graph</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">[:]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">moved_graph</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">nums</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># 새로 만들어진 graph의 shape구하기 </span>
            <span class="n">id_to_locs_dict</span> <span class="o">=</span> <span class="n">get_ids_and_shapes</span><span class="p">()</span>
            
            <span class="c1"># 인접한 두 무리가 있으면, 곱해서 더하기 </span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">id_to_locs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
            <span class="c1"># result = []</span>
            <span class="c1"># for p1, p2 in all_pairs:</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">key_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">key_2</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="k">if</span> <span class="n">is_adjacent</span><span class="p">(</span><span class="n">key_1</span><span class="p">,</span> <span class="n">key_2</span><span class="p">,</span> <span class="n">id_to_locs_dict</span><span class="p">[</span><span class="n">key_1</span><span class="p">],</span> <span class="n">id_to_locs_dict</span><span class="p">[</span><span class="n">key_2</span><span class="p">]):</span>
                        <span class="n">result</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_dict</span><span class="p">[</span><span class="n">key_1</span><span class="p">])</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_dict</span><span class="p">[</span><span class="n">key_2</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_adjacent</span><span class="p">(</span><span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">locs1</span><span class="p">,</span> <span class="n">locs2</span><span class="p">):</span>
    
    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">locs1</span><span class="p">:</span> <span class="c1"># id1이 있는 좌표에 대하여</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="c1"># 유효한 4방향 중 id2가 하나라도 잇다면, </span>
            <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">id2</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span> 
    <span class="k">return</span> <span class="kc">False</span> 
    

        

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">내 문제 풀이 2</p>
<p>debugging시 graph를 CCW 90로 돌려서 풀고, 실제 문제 구현할때는 (c, r)로 구현하여 푼 문제.
0,0은 좌상단이므로, 미생물을 옮길때는 outer loop이 y, inter loop이 x가 온다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>

<span class="c1"># f = open(&quot;/Users/dayelee/Documents/GitHub/mybook/Input.txt&quot;, &#39;r&#39;)</span>

<span class="n">N</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
<span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_rotated_CCW_90</span><span class="p">(</span><span class="n">my_map</span><span class="p">):</span>
    <span class="c1"># new_map = [[0] * N for _ in range(N)]</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="c1"># new_map[y][x] = my_map[N-x-1][y]</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">my_map</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">N</span><span class="o">-</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
    

<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span><span class="o">&lt;</span><span class="n">N</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">find_count_and_locs</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)])</span>
                <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
                
                <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
                    <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                        <span class="n">ny</span> <span class="o">=</span> <span class="n">cur_y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="p">;</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">cur_x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span><span class="n">nx</span><span class="p">)</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>

                            <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> 

    <span class="c1"># visited sort in ascending order </span>
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">visited</span><span class="p">)</span>
    <span class="n">visited</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">count</span><span class="p">,</span> <span class="n">visited</span>

<span class="k">def</span><span class="w"> </span><span class="nf">place_new_microbe</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">m_id</span><span class="p">):</span>
    <span class="n">removed_id</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="c1"># inclusive ~ exclusive </span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span> 
            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">m_id</span><span class="p">:</span>
                <span class="n">removed_id</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
            <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">m_id</span>

    <span class="c1"># check current id_to_cells </span>

    <span class="c1"># for removed microbe, check if they are separated into 2 groups </span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">removed_id</span><span class="p">:</span>
        <span class="n">count</span><span class="p">,</span> <span class="n">locs</span> <span class="o">=</span> <span class="n">find_count_and_locs</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> 
            <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
                <span class="n">graph</span><span class="p">[</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="n">cur_id</span><span class="p">):</span>

    <span class="c1"># STEP1: order priorities: 1. 가장 큰 영역 차지 2. id가 작은 것 </span>
    <span class="c1"># 이전부터 현재까지 id에 대해 id_to_dict variable 생성 </span>
    <span class="n">id_to_locs_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">cur_id</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">count</span><span class="p">,</span> <span class="n">locs</span> <span class="o">=</span> <span class="n">find_count_and_locs</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">id_to_locs_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">id</span><span class="p">,</span> <span class="n">locs</span><span class="p">))</span>

    <span class="c1"># sort id_to_locs_list in descending order of the area and id </span>
    <span class="n">list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">list_len</span><span class="p">):</span>
        <span class="n">lowest</span> <span class="o">=</span> <span class="n">f</span> 
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">list_len</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">compare</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">lowest</span> <span class="o">=</span> <span class="n">r</span> 
                
        
        <span class="c1"># SWAP </span>
        <span class="k">if</span> <span class="n">lowest</span> <span class="o">!=</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
            <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span>
            <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span> 

    <span class="c1"># 옮길 때는 1. 기존 배양 형태를 벗어나지 않고, 2. 다른 미생물 영역과 겹치지 않도록 3. x좌표가 작은 위치 -&gt; y좌표가 작은 위치</span>
    <span class="c1"># 옮길 수 없으면 새 용기에 옮겨지지 않고 사라짐. </span>
    <span class="n">new_graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">return_id_and_locs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">list_len</span><span class="p">):</span>
        <span class="c1"># if idx == 3:</span>
        <span class="c1">#     print(&#39;3&#39;)</span>
        <span class="n">cur_id</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">cur_locs</span> <span class="o">=</span> <span class="n">id_to_locs_list</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># 새 origin 찾기 : x좌표가 작은 위치 -&gt; y좌표가 작은 위치이므로 b좌표가 Outer loop</span>
        <span class="c1"># 현재 y와 x가 바뀌어 있는 상태라, 반대로 적음 </span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">True</span> 
                <span class="n">new_origin_y</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span> <span class="n">new_origin_x</span> <span class="o">=</span> <span class="n">b</span> 
                <span class="c1"># locs의 맨처음 (y, x)위치가 (0, 0) origin에 가장 가까울 것 : locs는 ascending order로 이미 sort되어 있음 </span>
                <span class="n">diff_y</span> <span class="o">=</span> <span class="n">cur_locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_origin_y</span>
                <span class="n">diff_x</span> <span class="o">=</span> <span class="n">cur_locs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_origin_x</span>
                <span class="k">for</span> <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="ow">in</span> <span class="n">cur_locs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">in_range</span><span class="p">(</span><span class="n">cur_y</span> <span class="o">-</span> <span class="n">diff_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="o">-</span> <span class="n">diff_x</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">new_graph</span><span class="p">[</span><span class="n">cur_y</span> <span class="o">-</span> <span class="n">diff_y</span><span class="p">][</span><span class="n">cur_x</span> <span class="o">-</span> <span class="n">diff_x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span> 
                        <span class="k">break</span>

                <span class="k">if</span> <span class="n">flag</span><span class="p">:</span> <span class="c1"># ok to move </span>
                    <span class="n">return_id_and_locs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">cur_id</span><span class="p">,</span> <span class="p">[]))</span>
                    <span class="k">for</span> <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="ow">in</span> <span class="n">cur_locs</span><span class="p">:</span>
                        <span class="n">new_graph</span><span class="p">[</span><span class="n">cur_y</span> <span class="o">-</span> <span class="n">diff_y</span><span class="p">][</span><span class="n">cur_x</span><span class="o">-</span><span class="n">diff_x</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur_id</span>
                        <span class="c1"># return_id_and_area에 넣기 </span>
                        <span class="c1"># cur_locs이 아니라, 변경된 위치를 넣어줘야함. </span>
                        <span class="n">return_id_and_locs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">cur_y</span> <span class="o">-</span> <span class="n">diff_y</span><span class="p">,</span><span class="n">cur_x</span><span class="o">-</span><span class="n">diff_x</span> <span class="p">))</span>
                    <span class="c1"># return_id_and_locs.append((cur_id, cur_locs))</span>
                    <span class="c1"># move가 끝나면 다음 idx로 넘어가야함. </span>
                    <span class="k">break</span> 
            <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                <span class="k">break</span>


    <span class="c1"># original graph update </span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_graph</span><span class="p">):</span>
        <span class="n">graph</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[:]</span>

    <span class="k">return</span> <span class="n">return_id_and_locs</span>


<span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">len1</span><span class="p">,</span> <span class="n">len2</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">len1</span> <span class="o">!=</span> <span class="n">len2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">len1</span> <span class="o">&gt;</span> <span class="n">len2</span> 
    <span class="k">return</span> <span class="n">id1</span> <span class="o">&lt;</span> <span class="n">id2</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">connected</span><span class="p">(</span><span class="n">locs1</span><span class="p">,</span> <span class="n">id2</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">l1</span> <span class="ow">in</span> <span class="n">locs1</span><span class="p">:</span>
        <span class="c1"># for l2 in locs2:</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">id2</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span> 

    <span class="k">return</span> <span class="kc">False</span> 

     
<span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span> 
    
    <span class="n">id_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="c1"># 인접한 것 끼리만 계산 </span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">id_len</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">id_len</span><span class="p">):</span>
            <span class="c1"># 인접하면 </span>
            <span class="k">if</span> <span class="n">connected</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">[</span><span class="n">f</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">id_to_locs</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">[</span><span class="n">f</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> 

    <span class="k">return</span> <span class="n">total</span>
    

<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">microbe_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Q</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

        <span class="c1"># place new microbe </span>
        <span class="n">place_new_microbe</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">microbe_id</span><span class="p">)</span>
    
        <span class="c1"># print(f&quot;Cur graph after putting ({r1, c1})~ ({r2, c2})&quot;)</span>
        <span class="c1"># print_rotated_CCW_90(graph)</span>

        <span class="c1"># move them </span>
        <span class="n">id_to_locs</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">microbe_id</span><span class="p">)</span>
        <span class="c1"># print(f&quot;After Move:&quot;)</span>
        <span class="c1"># print_rotated_CCW_90(graph)</span>

        <span class="c1"># calculate points </span>
        <span class="nb">print</span><span class="p">(</span><span class="n">calculate</span><span class="p">(</span><span class="n">id_to_locs</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">내 풀이 3</p>
<p>min-heap으로 좀 더 쉽게 locs를 sorting 함</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span> 
<span class="kn">from</span><span class="w"> </span><span class="nn">heapq</span><span class="w"> </span><span class="kn">import</span> <span class="n">heappush</span><span class="p">,</span> <span class="n">heappop</span> <span class="c1"># min-heap </span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;Input.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span> 

<span class="n">N</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">insert_new_microbe</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="c1"># global graph </span>
    <span class="c1"># [(r1, c1) ~ exclusive (r2, c2)) </span>
    <span class="n">candidates_for_removing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">candidates_for_removing</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
            <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span> <span class="c1"># list의 내부 요소만 수정하는 경우에는 &quot;전역 객체의 참조&quot;를 그대로 쓰는 거라 global 선언 업싱도 가능</span>

    <span class="c1"># 침입된 id를 대상으로 group이 두개로 나누어졌는지 세기 </span>
    <span class="k">for</span> <span class="n">r_id</span> <span class="ow">in</span> <span class="n">candidates_for_removing</span><span class="p">:</span>
        <span class="n">count</span><span class="p">,</span> <span class="n">locs</span> <span class="o">=</span> <span class="n">count_group_and_find_loc</span><span class="p">(</span><span class="n">r_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># removing </span>
            <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locs</span><span class="p">:</span>
                <span class="n">graph</span><span class="p">[</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">count_group_and_find_loc</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    count = int</span>
<span class="sd">    return locs: list </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">[[</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="n">return_locs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]:</span>
                <span class="n">locs</span> <span class="o">=</span> <span class="n">BFS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
                <span class="n">return_locs</span> <span class="o">=</span> <span class="n">return_locs</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">locs</span><span class="p">)</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> 
    <span class="c1"># print(f&quot;count, locs: {count}, {return_locs}&quot;)</span>
    <span class="k">return</span> <span class="n">count</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">return_locs</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">y</span><span class="o">&lt;</span><span class="n">N</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">N</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">BFS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">visited</span><span class="p">):</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)])</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span> 
    <span class="n">locs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)])</span>
    <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
        <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">cur_y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">];</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">cur_x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="c1"># 옆의 위치의 id가 현재 id와 같을 때만 넣음 </span>
            <span class="c1"># 방문하지 않았을 때에만 재방문해야함</span>
            <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                <span class="n">visited</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span> 
                <span class="n">locs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">locs</span>

<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">():</span>  
    <span class="n">new_graph</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">return_id_locs</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="c1"># 원래 그래프에 있는 id와 locs 계산 </span>
    <span class="n">visited</span> <span class="o">=</span><span class="p">[[</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">locs_and_id</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">visited_id</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="ow">in</span> <span class="n">visited_id</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">visited_id</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="n">cur_id</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> 
                <span class="n">locs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">BFS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">cur_id</span><span class="p">,</span> <span class="n">visited</span><span class="p">))</span>
                <span class="n">locs_and_id</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">cur_id</span><span class="p">,</span> <span class="n">locs</span><span class="p">))</span>

    <span class="c1"># sorting [(id, locs)], locs이 넓은 것 우선 -&gt; 같으면 id</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    min_heap이용해서 저장하고 나중에 heappop()으로 최소부터 꺼내면 시간 복잡도 더 작음 </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">)</span>

    <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span> 
    <span class="c1"># 미생물 하나씩 옮김 </span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">)):</span>  <span class="c1"># [루프 1]</span>
        <span class="c1"># origin 위치 찾기</span>
        <span class="c1"># 현재 우리의 graph는 왼쪽 위가 기준이므로 y가 최대한 작게 -&gt; x최대한 작게 </span>
        <span class="k">for</span> <span class="n">origin_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>  <span class="c1"># [루프 2]</span>
            <span class="k">for</span> <span class="n">origin_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span> <span class="c1"># [루프 3]</span>
                <span class="n">flag</span><span class="p">,</span> <span class="p">(</span><span class="n">distance_y</span><span class="p">,</span> <span class="n">distance_x</span><span class="p">)</span> <span class="o">=</span> <span class="n">can_use_origin</span><span class="p">(</span><span class="n">origin_y</span><span class="p">,</span> <span class="n">origin_x</span><span class="p">,</span> <span class="n">new_graph</span><span class="p">,</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># 옮기기 실행 </span>
                <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                    <span class="n">cur_id</span> <span class="o">=</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">before_y</span><span class="p">,</span> <span class="n">before_x</span> <span class="ow">in</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">before_y</span> <span class="o">-</span> <span class="n">distance_y</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">before_x</span> <span class="o">-</span> <span class="n">distance_x</span>
                        <span class="n">new_graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur_id</span>
                        <span class="n">return_id_locs</span><span class="p">[</span><span class="n">cur_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
                    <span class="k">break</span> <span class="c1"># 옮기면 현재 i에 대해서 멈춰야함. [루프 3 중단]</span>
            <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                <span class="k">break</span> <span class="c1"># 옮기면 현재 i에 대해서 멈춰야함. [루프 2 중단]</span>

    <span class="c1"># 원래 그래프 update 필수  </span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">return_id_locs</span>

<span class="k">def</span><span class="w"> </span><span class="nf">can_use_origin</span><span class="p">(</span><span class="n">origin_y</span><span class="p">,</span> <span class="n">origin_x</span><span class="p">,</span> <span class="n">new_graph</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">locs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    locs는 Sort되어서 맨 앞에 있는 것이 (y,x)가 제일 작아야함. -&gt; min-heap을 사용해서 root가 제일 작게함. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># sort locs </span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">locs</span><span class="p">)):</span>
        <span class="n">heappush</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">locs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="c1"># 맨 첫 원소 q[0] 는 (y -&gt; x)순으로 가장 작은 것이 들어있음 </span>
    <span class="n">distance_y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">origin_y</span> 
    <span class="n">distance_x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">origin_x</span>

    <span class="k">for</span> <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
        <span class="n">new_pos_y</span> <span class="o">=</span> <span class="n">cur_y</span> <span class="o">-</span> <span class="n">distance_y</span> 
        <span class="n">new_pos_x</span> <span class="o">=</span> <span class="n">cur_x</span> <span class="o">-</span> <span class="n">distance_x</span>
        <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">new_pos_y</span><span class="p">,</span> <span class="n">new_pos_x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">new_graph</span><span class="p">[</span><span class="n">new_pos_y</span><span class="p">][</span><span class="n">new_pos_x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="n">distance_y</span><span class="p">,</span> <span class="n">distance_x</span><span class="p">)</span> 
    


<span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    locs_and_id = [(id1, locs1 (list))]</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">lens</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lens</span><span class="p">):</span>
        <span class="n">lowest</span> <span class="o">=</span> <span class="n">f</span> 
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">lens</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">compare</span><span class="p">(</span><span class="n">locs_and_id</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">lowest</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">lowest</span> <span class="o">=</span> <span class="n">r</span> 
        
        <span class="c1"># SWAP </span>
        <span class="k">if</span> <span class="n">lowest</span> <span class="o">!=</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span>
            <span class="n">locs_and_id</span><span class="p">[</span><span class="n">lowest</span><span class="p">]</span> <span class="o">=</span> <span class="n">locs_and_id</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
            <span class="n">locs_and_id</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">id1</span><span class="p">,</span> <span class="n">locs1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">locs2</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs2</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">id1</span> <span class="o">&lt;</span> <span class="n">id2</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">():</span>
    
    <span class="k">for</span> <span class="n">e_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Q</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># 글로벌 변수를 읽기만 할때는 global 선언안해도 됨. </span>
        <span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="c1"># 미생물 투입 </span>
        <span class="n">insert_new_microbe</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">e_id</span><span class="p">)</span>

        <span class="c1"># print(&#39;graph:&#39;)</span>
        <span class="c1"># for row in graph:</span>
        <span class="c1">#     print(row[:])</span>

        <span class="c1"># 배양 용기 이동, 옮긴 용기안의 {id: locs}으로 되어있는 dictionary 반환 </span>
        <span class="n">return_id_locs</span> <span class="o">=</span> <span class="n">replace</span><span class="p">()</span>

        <span class="c1"># print(&#39;After moving graph:&#39;)</span>
        <span class="c1"># for row in graph:</span>
        <span class="c1">#     print(row[:])</span>

        <span class="c1"># 인접한 미생물의 영역 넓이의 곱을 표시 </span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">return_id_locs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)):</span>  <span class="c1"># i &lt; j 로만 돌림</span>
                <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">keys</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">locs1</span><span class="p">,</span> <span class="n">locs2</span> <span class="o">=</span> <span class="n">return_id_locs</span><span class="p">[</span><span class="n">id1</span><span class="p">],</span> <span class="n">return_id_locs</span><span class="p">[</span><span class="n">id2</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">is_adjacent</span><span class="p">(</span><span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">locs1</span><span class="p">,</span> <span class="n">locs2</span><span class="p">):</span>
                    <span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs1</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">locs2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_adjacent</span><span class="p">(</span><span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">locs1</span><span class="p">,</span> <span class="n">locs2</span><span class="p">):</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locs1</span><span class="p">:</span>
        <span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span> <span class="o">=</span> <span class="n">loc</span> 

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">cur_y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="n">cur_x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">id2</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span> 
    
    <span class="k">return</span> <span class="kc">False</span> 

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">test case</p>
<ol class="arabic simple">
<li></li>
</ol>
<p>8 4 <br>
2 2 5 6<br>
2 3 5 8<br>
2 0 5 3<br>
1 1 6 6<br></p>
<ol class="arabic simple" start="2">
<li></li>
</ol>
<p>3 3<br>
0 0 3 2 <br>
1 0 3 3<br>
2 2 3 3<br></p>
<ol class="arabic simple" start="3">
<li></li>
</ol>
<p>8 5<br>
0 0 2 5<br>
1 1 5 6<br>
1 0 3 6<br>
7 7 8 8<br>
2 4 6 7<br></p>
</div>
</section>
<section id="id1">
<h2>4번: 민트초코 우유<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<div class="dropdown admonition">
<p class="admonition-title">solution</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">heapq</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.txt&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">print_trust</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">trust</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">print_food</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">food</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Student</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">food</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trust</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 신앙심</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defence</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 방어</span>
    <span class="c1">#</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">trust</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">trust</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Group</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">food</span><span class="p">):</span>
        <span class="c1"># 대표 좌표, 대표 음식</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">food</span> <span class="o">=</span> <span class="n">food</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">member</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        대표자 정하기 &amp; trust set</span>
<span class="sd">        대표자: trust up -&gt; r down -&gt; c down</span>
<span class="sd">        대표자.trust += 그룹원 -1</span>
<span class="sd">        팀원.trust -= 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">member</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">member</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">trust</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">member</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">trust</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c1">#</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">print_group_member</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">member</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">((</span><span class="n">m</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">c</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="n">food2bin</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">N</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">breakfast</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - 모든 학생의 trust += 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">stu</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
            <span class="n">stu</span><span class="o">.</span><span class="n">trust</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="n">dr</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">dc</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bfs</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">food</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">sr</span><span class="p">,</span> <span class="n">sc</span><span class="p">)])</span>
    <span class="n">group</span><span class="o">.</span><span class="n">member</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">sr</span><span class="p">][</span><span class="n">sc</span><span class="p">])</span>
    <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">v</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">nr</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">dr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">dc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">in_range</span><span class="p">(</span><span class="n">nr</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span><span class="p">[</span><span class="n">nr</span><span class="p">][</span><span class="n">nc</span><span class="p">]</span> <span class="ow">or</span> <span class="n">board</span><span class="p">[</span><span class="n">nr</span><span class="p">][</span><span class="n">nc</span><span class="p">]</span><span class="o">.</span><span class="n">food</span> <span class="o">!=</span> <span class="n">food</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">nr</span><span class="p">,</span> <span class="n">nc</span><span class="p">))</span>
            <span class="n">v</span><span class="p">[</span><span class="n">nr</span><span class="p">][</span><span class="n">nc</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">group</span><span class="o">.</span><span class="n">member</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">nr</span><span class="p">][</span><span class="n">nc</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">v</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lunch</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - 인접한 학생들과 신봉 음식이 같은 경우 그룹 형성</span>
<span class="sd">    - 대표자: trust up -&gt; r down -&gt; c down</span>
<span class="sd">    - 대표자.trust += 그룹원 -1</span>
<span class="sd">    - 팀원.trust -= 1</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">[[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">group_lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">visited</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="c1"># 그룹 형성</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">food</span><span class="p">)</span>
            <span class="n">visited</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">food</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
            <span class="n">group_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
            <span class="c1"># 대표자 정하기 &amp; trust set</span>
            <span class="n">group</span><span class="o">.</span><span class="n">set_manager</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">group_lst</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">set_order</span><span class="p">(</span><span class="n">group_lst</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [1] 전파 순서 정하기</span>
<span class="sd">    - 전파 순서: 단일 -&gt; 이중 -&gt; 삼중 그룹</span>
<span class="sd">        - 대표자의 B up -&gt; 대표자의 r down -&gt; c down</span>
<span class="sd">    :return order_lst</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">order_lst</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>  <span class="c1"># 단일/이중/삼중</span>
    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">group_lst</span><span class="p">:</span>
        <span class="c1"># 삼중인 경우</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">food</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">order_lst</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
        <span class="c1"># 단일 인 경우</span>
        <span class="k">elif</span> <span class="n">g</span><span class="o">.</span><span class="n">food</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]:</span>
            <span class="n">order_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># 이중인 경우</span>
            <span class="n">order_lst</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">order_lst</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">strong_spread</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">spreader</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="n">target</span><span class="o">.</span><span class="n">food</span> <span class="o">=</span> <span class="n">spreader</span><span class="o">.</span><span class="n">food</span>
    <span class="n">x</span> <span class="o">-=</span> <span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">trust</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">target</span><span class="o">.</span><span class="n">trust</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">x</span>


<span class="k">def</span><span class="w"> </span><span class="nf">weak_spread</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">spreader</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">food</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">spreader</span><span class="o">.</span><span class="n">food</span> <span class="o">&gt;&gt;</span> <span class="n">food</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">((</span><span class="n">target</span><span class="o">.</span><span class="n">food</span> <span class="o">&gt;&gt;</span> <span class="n">food</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">target</span><span class="o">.</span><span class="n">food</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">food</span><span class="p">)</span>
    <span class="n">target</span><span class="o">.</span><span class="n">trust</span> <span class="o">+=</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">x</span>


<span class="k">def</span><span class="w"> </span><span class="nf">do_spread</span><span class="p">(</span><span class="n">spreader</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [2] 전파하기</span>
<span class="sd">    - 전파자</span>
<span class="sd">        - 전파 방향: trust % 4</span>
<span class="sd">        - x: B-1(간절함), B = 1check</span>
<span class="sd">    - 전파 시작</span>
<span class="sd">        - 전파 방향으로 1칸씩 이동하며 전파</span>
<span class="sd">        - 격자 밖으로 나가거나 x = 0이 되면 전파 종료</span>
<span class="sd">        - 전파 음식이 타겟음식과 같으면 전파 X, 다음 진행</span>
<span class="sd">        - 다르면, 전파 수행</span>
<span class="sd">    [3] 전파 방법</span>
<span class="sd">    - y: 타겟의 trust</span>
<span class="sd">    - 강한 전파(x &gt; y):</span>
<span class="sd">        - 타겟.food = 전파.food</span>
<span class="sd">        - 전파.x -= y+1</span>
<span class="sd">        - 타겟.trust += 1</span>
<span class="sd">    - 약한 전파 (x &lt;= y):</span>
<span class="sd">        - 타겟.food |= 전파자.food   (있는지 확인 필요)</span>
<span class="sd">        - 타겟.trust += x</span>
<span class="sd">        - 전파.x = 0</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">spreader</span><span class="o">.</span><span class="n">trust</span> <span class="o">%</span> <span class="mi">4</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">spreader</span><span class="o">.</span><span class="n">trust</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">spreader</span><span class="o">.</span><span class="n">trust</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">spreader</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="n">spreader</span><span class="o">.</span><span class="n">c</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
        <span class="n">nr</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">dr</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">dc</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">*</span> <span class="n">i</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_range</span><span class="p">(</span><span class="n">nr</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="n">target</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="n">nr</span><span class="p">][</span><span class="n">nc</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">food</span> <span class="o">^</span> <span class="n">spreader</span><span class="o">.</span><span class="n">food</span><span class="p">:</span>  <span class="c1"># 두 음식이 다를 때만 전파 진행</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">trust</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">strong_spread</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">spreader</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">weak_spread</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">spreader</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
            <span class="n">target</span><span class="o">.</span><span class="n">defence</span> <span class="o">=</span> <span class="n">t</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dinner</span><span class="p">(</span><span class="n">group_lst</span><span class="p">):</span>
    <span class="c1"># 전파 순서 정하기</span>
    <span class="n">order_lst</span> <span class="o">=</span> <span class="n">set_order</span><span class="p">(</span><span class="n">group_lst</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">order_lst</span><span class="p">:</span>
        <span class="n">order</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">spreader</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">spreader</span><span class="o">.</span><span class="n">defence</span> <span class="o">&lt;</span> <span class="n">t</span><span class="p">:</span>
                <span class="n">do_spread</span><span class="p">(</span><span class="n">spreader</span><span class="p">)</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">def</span><span class="w"> </span><span class="nf">print_result</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TCM, TC, TM, CM, M, C, T 순으로 각 음식의 신봉자들의 신앙심 총합 출력</span>
<span class="sd">    &#39;T&#39;: 0,</span>
<span class="sd">    &#39;C&#39;: 1,</span>
<span class="sd">    &#39;M&#39;: 2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">stu</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
            <span class="n">result</span><span class="p">[</span><span class="n">stu</span><span class="o">.</span><span class="n">food</span><span class="p">]</span> <span class="o">+=</span> <span class="n">stu</span><span class="o">.</span><span class="n">trust</span>

    <span class="k">for</span> <span class="n">food</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;TCM&#39;</span><span class="p">,</span> <span class="s1">&#39;TC&#39;</span><span class="p">,</span> <span class="s1">&#39;TM&#39;</span><span class="p">,</span> <span class="s1">&#39;CM&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">]:</span>
        <span class="n">key_food</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">food</span><span class="p">:</span>
            <span class="n">key_food</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">food2bin</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">key_food</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="n">N</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">board</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">stu</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
        <span class="n">food</span> <span class="o">=</span> <span class="n">food2bin</span><span class="p">[</span><span class="n">tmp</span><span class="p">[</span><span class="n">column</span><span class="p">]]</span>
        <span class="n">stu</span><span class="o">.</span><span class="n">food</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">food</span><span class="p">)</span>
        <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">stu</span>
<span class="c1">#</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">trust</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">T</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">breakfast</span><span class="p">()</span>

    <span class="n">GROUP_LST</span> <span class="o">=</span> <span class="n">lunch</span><span class="p">()</span>

    <span class="n">dinner</span><span class="p">(</span><span class="n">GROUP_LST</span><span class="p">)</span>

    <span class="n">print_result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">틀린 답</p>
<p>어디서 틀렸나? 해당 group의 대표자의 전도 이후에는 음식이름이나, 신뢰도, 그에 따른 상태가 바뀌는데,
현재 코드로하면 맨 처음의 groups에서 계속 iterate하는 것이라 틀림.</p>
<p>따라서, 계속 바뀌는 상황에서 맞게하려는 경우에는</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span> 

<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;Input.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span> 
<span class="kn">import</span><span class="w"> </span><span class="nn">heapq</span> 

<span class="n">N</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">graph</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">belive_graph</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">input</span><span class="p">()))</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">belive_graph</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>

<span class="c1"># 간절함 그래프 </span>
<span class="n">desperate_graph</span> <span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">morning</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">belive_graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">lunch</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    1. 인접한 학생들과 신봉 음식이 &quot;완전히 같은 경우&quot;에 그룹 형성 </span>
<span class="sd">    2. 대표자 선정 </span>
<span class="sd">        - 신앙심이 가장 큰 사람 -&gt; y가 작은 사람 -&gt; x가 작은 사람 </span>
<span class="sd">    3. 그룹의 대표자에게 &lt;- 그룹 다른 학생들의 신앙심이 넘어감.</span>
<span class="sd">        - 대표자는 +1, 그룹 내 다른 학생들 -1 </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">[[</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="c1"># group을 넣을때 순서가 있음 </span>
    <span class="n">groups</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]:</span>
                <span class="n">locs</span> <span class="o">=</span> <span class="n">BFS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span> <span class="c1"># 음식순서 -&gt; 대표자가 맨 앞에 있는 list반환, (len(음식), -belive_graph[ny][nx], ny, nx)</span>
                <span class="n">heapq</span><span class="o">.</span><span class="n">heappush</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">locs</span><span class="p">)</span>

    <span class="c1"># 각 그룹을 돌면서 대표자(맨 처음)에게 신앙심 넘겨주기 </span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="c1"># 대표자 </span>
        <span class="n">representative</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">group</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">belive_graph</span><span class="p">[</span><span class="n">other</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">other</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">belive_graph</span><span class="p">[</span><span class="n">representative</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">representative</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">groups</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">x</span> <span class="o">&lt;</span><span class="n">N</span> 

<span class="k">def</span><span class="w"> </span><span class="nf">BFS</span><span class="p">(</span><span class="n">cury</span><span class="p">,</span> <span class="n">curx</span><span class="p">,</span> <span class="n">visited</span><span class="p">):</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">locs</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">cury</span><span class="p">][</span><span class="n">curx</span><span class="p">]),</span><span class="o">-</span><span class="n">belive_graph</span><span class="p">[</span><span class="n">cury</span><span class="p">][</span><span class="n">curx</span><span class="p">],</span><span class="n">cury</span><span class="p">,</span> <span class="n">curx</span><span class="p">)]</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="n">cury</span><span class="p">,</span> <span class="n">curx</span><span class="p">)])</span>
    <span class="n">original_food</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">cury</span><span class="p">][</span><span class="n">curx</span><span class="p">]</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">cury</span><span class="p">][</span><span class="n">curx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span> 

    <span class="k">while</span> <span class="n">q</span><span class="p">:</span>
        <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="c1"># graph내에 있고, 신봉 음식 이름이 원래 (cury, curx)와 동일하고 visited안했다면</span>
            <span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="ow">and</span> <span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span> <span class="o">==</span> <span class="n">original_food</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]:</span>
                <span class="n">visited</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span> 
                <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
                <span class="c1"># 음식순서: 단일 -&gt; 2개 -&gt; 3개 (min-heap), 대표자: 신앙심이 가장 큰 사람 (max_heap) -&gt; y가 작은 사람 (min-heap) -&gt; x가 작은 사람 (min-heap)</span>
                <span class="n">heapq</span><span class="o">.</span><span class="n">heappush</span><span class="p">(</span><span class="n">locs</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">]),</span> <span class="o">-</span><span class="n">belive_graph</span><span class="p">[</span><span class="n">ny</span><span class="p">][</span><span class="n">nx</span><span class="p">],</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">locs</span>



<span class="k">def</span><span class="w"> </span><span class="nf">dinner</span><span class="p">(</span><span class="n">groups</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    groups안의 각 group은 다음과 같이 정렬 : heap이라서 heappop()으로 빼야함. </span>
<span class="sd">    # (음식조합개수, -belive_graph[ny][nx], y, x): 음식조합개수 min, 신앙심이 max, y가 최소, x가 최소 </span>

<span class="sd">    대표자(==전파자) 의 신앙심 전파</span>
<span class="sd">    - 만약 전파하기 전에, 다른 전파자에게 전파 당한 경우 </span>
<span class="sd">        - 그 날 전파하지 못함. </span>
<span class="sd">        - 추가로 전파를 받을 수는 있음. </span>
<span class="sd">    - 자신과 다른 음식을 좋아하는 학생이 있는 경우에 전파 방향으로 전파함.</span>
<span class="sd">        - 전파 방향: 신앙심 % 4</span>
<span class="sd">        - 0: 위, 1: 아래, 2: 왼쪽, 3: 오른쪽</span>
<span class="sd">        - 전파자 update </span>
<span class="sd">            - 간절함: 신앙심-1, 신앙심: 1 </span>
<span class="sd">    - 전파 방향으로 한 칸 씩 이동하면 전파 </span>
<span class="sd">        - 1. 전파 대상의 신봉음식이 동일한 경우, 전파하지 않고 지나감 </span>
<span class="sd">        - 2. 신봉음식이 다른 경우 </span>
<span class="sd">            - 강한 전파: 전파자의 간절함 &gt; 전파대상의 신앙심인 경우 </span>
<span class="sd">                - 전파대상의 신봉 음식 = 전파자의 신봉 음식 </span>
<span class="sd">                - 전파자 간절함: 간절함 - (전파대상의 신앙심 + 1)</span>
<span class="sd">                    - 간절함이 0이 되면 전파 종료 </span>
<span class="sd">                - 전파대상 신앙심: 전파대상의 신앙심 + 1  </span>
<span class="sd">            - 약한 전파: 전파자의 간절함 &lt;= 전파대상의 신앙심인 경우 </span>
<span class="sd">                - 전파대상의 신봉 음식 += 전파자의 신봉 음식 </span>
<span class="sd">                - 전파자 간절함 = 0</span>
<span class="sd">                - 전파대상의 신앙심 += 전파자의 간절함 </span>
<span class="sd">        - 종료: Graph 밖을 벗어나거나, &#39;간절함&#39; 0이 되면 종료 </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">DY</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span> <span class="n">DX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">is_propagated</span> <span class="o">=</span> <span class="p">[[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

    <span class="c1"># 모든 대표자의 위치 </span>
    <span class="n">all_representatives</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="c1"># 대표자 </span>
        <span class="n">representative</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">r_y</span> <span class="o">=</span> <span class="n">representative</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">r_x</span> <span class="o">=</span> <span class="n">representative</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">all_representatives</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">r_y</span><span class="p">,</span> <span class="n">r_x</span><span class="p">))</span>


    <span class="c1"># 이후 ordered 순서로 전파 실행</span>
    <span class="c1"># for representative in ordered:</span>
    <span class="c1">#     ...</span>


    <span class="c1"># for group in groups: # 순서대로 뽑기 </span>
    <span class="k">while</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">heapq</span><span class="o">.</span><span class="n">heappop</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>


        <span class="c1"># 대표자 </span>
        <span class="n">representative</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">r_y</span> <span class="o">=</span> <span class="n">representative</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">r_x</span> <span class="o">=</span> <span class="n">representative</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="c1"># print(f&#39;representative: ({representative[2], representative[3]})&#39;)</span>

        <span class="c1"># 대표자가 전파당한 경우 전파할 수 없음 </span>
        <span class="k">if</span> <span class="n">is_propagated</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]:</span>
            <span class="k">continue</span>    

        <span class="c1"># 전파 시작 </span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        전파자 update </span>
<span class="sd">            - 간절함: 신앙심-1, 신앙심: 1 </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">belive_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">%</span> <span class="mi">4</span>  <span class="c1"># 빙행 설정 </span>
        <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">=</span> <span class="n">belive_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">belive_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">r_food</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span>


        <span class="n">cur_y</span> <span class="o">=</span> <span class="n">r_y</span> <span class="o">+</span> <span class="n">DY</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>
        <span class="n">cur_x</span> <span class="o">=</span> <span class="n">r_x</span> <span class="o">+</span> <span class="n">DX</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">in_range</span><span class="p">(</span><span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span><span class="p">):</span> <span class="c1"># 간절함이 0이 되면 전파 종료 혹은 그래프를 나가면 종료 </span>
            <span class="c1"># 전파 대상의 신봉음식이 동일한 경우, 전파하지 않고 지나감 </span>
            <span class="k">if</span> <span class="n">r_food</span> <span class="o">==</span> <span class="n">graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]:</span>
                <span class="n">cur_y</span> <span class="o">+=</span> <span class="n">DY</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>
                <span class="n">cur_x</span> <span class="o">+=</span> <span class="n">DX</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>
                <span class="c1"># print(f&#39;after propgation with repre {r_y, r_x}&#39;)</span>
                <span class="c1"># for row in belive_graph:</span>
                <span class="c1">#     print(row[:])</span>
                <span class="k">continue</span> 

            <span class="c1"># 신봉음식이 다른 경우 </span>
            <span class="k">if</span> <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">belive_graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]:</span> <span class="c1"># 강한전파 </span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                - 전파대상의 신봉 음식 = 전파자의 신봉 음식 </span>
<span class="sd">                - 전파자 간절함: 간절함 - (전파대상의 신앙심 + 1)</span>
<span class="sd">                - 전파대상 신앙심: 전파대상의 신앙심 + 1  </span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span> <span class="o">=</span> <span class="n">r_food</span> 
                <span class="n">belive_graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">-=</span> <span class="n">belive_graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span>
            
            <span class="k">else</span><span class="p">:</span> <span class="c1"># 약한 전파 </span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                전파대상의 신봉 음식 += 전파자의 신봉 음식 </span>
<span class="sd">                - 전파자 간절함 = 0</span>
<span class="sd">                - 전파대상의 신앙심 += 전파자의 간절함 </span>
<span class="sd">                </span>
<span class="sd">                &#39;TCM&#39; -&gt; &#39;TC&#39; -&gt; &#39;TM&#39; -&gt; &#39;CM&#39; -&gt; &#39;M&#39; -&gt; &#39;C&#39; -&gt; &#39;T&#39; </span>
<span class="sd">                민트초코우유 -&gt; 민트초코 -&gt; 민트우유 -&gt; 초코우유 -&gt; 우유 -&gt; 초코 -&gt; 민트 순서대로 각 음식의 신앙심 출력 </span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">cur_food</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">])</span>
                <span class="n">cur_food</span> <span class="o">=</span> <span class="n">cur_food</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]))</span>
                
                <span class="n">result_food</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="s1">&#39;T&#39;</span> <span class="ow">in</span> <span class="n">cur_food</span><span class="p">:</span>
                    <span class="n">result_food</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;C&#39;</span> <span class="ow">in</span> <span class="n">cur_food</span><span class="p">:</span>
                    <span class="n">result_food</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;M&#39;</span> <span class="ow">in</span> <span class="n">cur_food</span><span class="p">:</span>
                    <span class="n">result_food</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
                

                <span class="n">graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result_food</span><span class="p">)</span>
                <span class="c1"># print(result_food)</span>
                <span class="n">belive_graph</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span>
                <span class="n">desperate_graph</span><span class="p">[</span><span class="n">r_y</span><span class="p">][</span><span class="n">r_x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c1">## update </span>
            <span class="k">if</span> <span class="n">check_representative_propagaged</span><span class="p">(</span><span class="n">cur_y</span><span class="p">,</span> <span class="n">cur_x</span><span class="p">,</span> <span class="n">all_representatives</span><span class="p">):</span>
                <span class="n">is_propagated</span><span class="p">[</span><span class="n">cur_y</span><span class="p">][</span><span class="n">cur_x</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span> 

            <span class="n">cur_y</span> <span class="o">+=</span> <span class="n">DY</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>
            <span class="n">cur_x</span> <span class="o">+=</span> <span class="n">DX</span><span class="p">[</span><span class="nb">dir</span><span class="p">]</span>

            <span class="c1"># print(f&#39;after propgation with repre {r_y, r_x}&#39;)</span>
            <span class="c1"># for row in belive_graph:</span>
            <span class="c1">#     print(row[:])</span>


<span class="k">def</span><span class="w"> </span><span class="nf">check_representative_propagaged</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">repres_set</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="n">repres_set</span>


<span class="k">def</span><span class="w"> </span><span class="nf">print_believe</span><span class="p">(</span><span class="n">idx</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    &#39;TCM&#39; -&gt; &#39;TC&#39; -&gt; &#39;TM&#39; -&gt; &#39;CM&#39; -&gt; &#39;M&#39; -&gt; &#39;C&#39; -&gt; &#39;T&#39; </span>
<span class="sd">    민트초코우유 -&gt; 민트초코 -&gt; 민트우유 -&gt; 초코우유 -&gt; 우유 -&gt; 초코 -&gt; 민트 순서대로 각 음식의 신앙심 출력 </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;TCM&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;TC&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;TM&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;CM&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="mi">6</span>
    <span class="p">}</span>
    <span class="n">believe_sums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">7</span>

    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">believe_sums</span><span class="p">[</span><span class="n">my_dict</span><span class="p">[</span><span class="n">graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]]]</span> <span class="o">+=</span> <span class="n">belive_graph</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">believe_sums</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">idx</span> <span class="o">!=</span> <span class="n">T</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
        <span class="c1"># 아침 </span>
        <span class="n">morning</span><span class="p">()</span>
        <span class="c1"># print(&#39;after morning: &#39;)</span>
        <span class="c1"># for row in belive_graph:</span>
        <span class="c1">#     print(row[:])</span>

        <span class="c1"># 점심 </span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">lunch</span><span class="p">()</span>
        <span class="c1"># print(&#39;after lunch belif: &#39;)</span>
        <span class="c1"># for row in belive_graph:</span>
        <span class="c1">#     print(row[:])</span>
        <span class="c1"># print(&#39;after lunch food: &#39;)</span>
        <span class="c1"># for row in graph:</span>
        <span class="c1">#     print(row[:])</span>

        <span class="c1"># 저녁 </span>
        <span class="n">dinner</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
        <span class="c1"># print(&#39;after dinner: &#39;)</span>
        <span class="c1"># for row in belive_graph:</span>
        <span class="c1">#     print(row[:])</span>

        <span class="c1"># 출력 </span>
        <span class="n">print_believe</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">solve</span><span class="p">()</span>    
</pre></div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./_pages/practice"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../theory/7_binarysearch.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">이전</p>
        <p class="prev-next-title">Lecture 7-1. Binary Search</p>
      </div>
    </a>
    <a class="right-next"
       href="2_DFS_BFSPS.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">다음</p>
        <p class="prev-next-title">Lecture 2-2. DFS/BFS 실습</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 내용
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bfs">1번: 마법의 숲 탐색 문제 풀이 BFS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-priorityqueue">3번: 미생물 연구 Sorting, PriorityQueue</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">4번: 민트초코 우유</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
으로 Daye Lee
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>